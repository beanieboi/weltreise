function requestJson(e,n){var a={},o=new XMLHttpRequest;o.open("GET",e,!0),o.onreadystatechange=function(){this.readyState===XMLHttpRequest.DONE&&(200==this.status&&(a=JSON.parse(this.responseText)),n(a))},o.send()}var detailed_route=[{location:new google.maps.LatLng(4.710989,-74.072092),stopover:!1},{location:new google.maps.LatLng(5.6365208,-73.5358133),stopover:!1},{location:new google.maps.LatLng(6.552555,-73.1374154),stopover:!1},{location:new google.maps.LatLng(6.6358495,-73.2277859),stopover:!1}],Feed={settings:{maxItemsCount:6,feedUrl:"https://weltreise.abwesend.com/s3/weltreise-log.json",feedDomEle:document.getElementById("feedJson")},init:function(){console.log("init feed"),this.updateFeedContent(this.settings.feedUrl,this.settings.feedDomEle,this.settings.maxItemsCount)},updateFeedContent:function(e,n,a){requestJson(e,function(e){var o=n,t="",g=new Date;for(var s in e){var l=new Date(e[s].created_at),i="",r="",p="";if(l){i=l.getDate()+"."+(l.getMonth()+1)+"."+l.getFullYear();var m=(g.getTime()-l.getTime())/1e3/60/60,L=(g.getTime()-l.getTime())/1e3/60,w=Math.abs(Math.round(m)),d=Math.abs(Math.round(L));w<24&&(i="vor "+w+" Stunden"),1===w&&(i="vor "+w+" Stunde"),0===w&&(i="vor "+d+" Minuten")}var c="";e[s].latitude&&e[s].longitude&&(c='<a href="javascript:centerAndZoomMapTo('+e[s].latitude+", "+e[s].longitude+', 13, true)" class="location"></a>'),p='<img src="'+e[s].image_url+'" class="twitter-img">',s>=a&&(r="hidden",p='<img data-src="'+e[s].image_url+'" class="twitter-img">'),t+='<div id="'+e[s].id+'" class="feed-item '+r+'"><div class="image">'+p+c+'</div><div class="date">'+i+'</div><div class="copy"><img class="icon" src="/images/abwesend-adf34ac3.png" width="40" height="40">'+e[s].description+"</div></div>"}o.innerHTML=t})},onScroll:function(){var e=document.getElementById("feedJson");if(document.body.clientWidth<=700)var n=document.body.scrollHeight,a=document.body.scrollTop+window.innerHeight;else{document.getElementById("scrollInfo").style.display="none";var o=e.scrollTop,n=e.scrollHeight,t=e.offsetHeight,a=o+t}if(a>.9*n){var g=e.getElementsByClassName("hidden");if(0!==g.length){var s=g[0],l=s.getElementsByClassName("twitter-img");if(0!==l.length){var i=l[0].getAttribute("data-src");l[0].setAttribute("src",i)}s.classList.remove("hidden")}}}},savedMarker=[],gmap,Map={settings:{mapOptions:{center:new google.maps.LatLng(52.520007,13.404954),zoom:7,styles:styles},mapIcons:{circle:{url:"/images/circle-5fd85dad.png",scaledSize:new google.maps.Size(10,10),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(5,5)},icon:{url:"/images/point-71936f2b.png",scaledSize:new google.maps.Size(39,54),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(19,55)},photoIcon:{url:"/images/camera-dfee0739.png",scaledSize:new google.maps.Size(39,54),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(19,55)},locationIcon:{url:"/images/location_red-2a00507b.png",scaledSize:new google.maps.Size(35,47),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,47)}}},init:function(){console.log("init map"),gmap=new google.maps.Map(document.getElementById("map-canvas"),this.settings.mapOptions),this.addMarker(),this.updateTravelRoute(this.settings.mapIcons.circle,this.settings.mapIcons.icon)},updateTravelRoute:function(e,n){new google.maps.Marker({position:travelled_route[travelled_route.length-1],map:gmap,icon:n});gmap.setCenter(travelled_route[travelled_route.length-1]);for(var a in planned_route)var o=new google.maps.Marker({position:planned_route[a],map:gmap,icon:e});for(var a in travelled_route)var o=new google.maps.Marker({position:travelled_route[a],map:gmap,icon:e});new google.maps.Polyline({path:travelled_route,strokeColor:"#FFA455",strokeWeight:2,geodesic:!0,map:gmap}),new google.maps.Polyline({path:planned_route,strokeColor:"#FFA455",strokeOpacity:.2,strokeWeight:2,geodesic:!0,map:gmap});window.resetMap=function(){0!=savedMarker.length&&savedMarker.pop().setMap(null),gmap.panTo(travelled_route[travelled_route.length-1]),gmap.setZoom(3)}},addMarker:function(){var e,n,a=new google.maps.InfoWindow;for(n=0;n<markerData.length;n++)e=new google.maps.Marker({position:markerData[n].position,map:gmap,icon:this.settings.mapIcons.photoIcon}),google.maps.event.addListener(e,"click",function(e,n){return function(){a.setContent(markerData[n].content),a.open(gmap,e)}}(e,n))},resize:function(){var e=gmap.getCenter();google.maps.event.trigger(gmap,"resize"),gmap.setCenter(e)},centerAndZoomMapTo:function(e,n,a,o){0!=savedMarker.length&&savedMarker.pop().setMap(null);var t=new google.maps.LatLng(e,n);if(gmap.panTo(t),gmap.setZoom(a),o){var g=new google.maps.Marker({position:t,map:gmap,icon:locationIcon});savedMarker.push(g)}}},markerData=[{title:"S\xe3o Miguel (Azoren)",position:new google.maps.LatLng(37.715727,-25.434506),content:"<b>S\xe3o Miguel (Azoren)</b><br/><br/>Erfahre mehr \xfcber unsere Zeit<br/> auf S\xe3o Miguel in <a href='https://wir.abwesend.com/2017/07/weltreise-auftakt-sao-miguel-azoren/' class='marker-link' target='_blank'>unserem Blog</a>.<br/><br/><img src='https://wir.abwesend.com/wp-content/uploads/2017/08/DJI_0089_preview-1.jpg' width='200px' height='auto' class='marker-image'><br/>"},{title:"10 Highlights unserer Reise durch Kolumbien",position:new google.maps.LatLng(4.6323099,-74.0709709),content:"<b>10 Highlights unserer Reise durch Kolumbien</b></br></br>Erfahre mehr \xfcber unsere Zeit<br/> in Kolumbien in <a href='https://wir.abwesend.com/2017/08/10-highlights-unserer-reise-durch-kolumbien/' class='marker-link' target='_blank'>unserem Blog</a>.<br/><br/><img src='https://wir.abwesend.com/wp-content/uploads/2017/08/P8033785_preview.jpg' width='200px' height='auto' class='marker-image'><br/>"},{title:"Auf den Spuren der Inka in Peru",position:new google.maps.LatLng(-12.1205708,-77.0305231),content:"<b>Auf den Spuren der Inka in Peru</b></br></br>Erfahre mehr \xfcber unsere Zeit<br/> in Peru in <a href='https://wir.abwesend.com/2017/09/auf-den-spuren-der-inka-in-peru/' class='marker-link' target='_blank'>unserem Blog</a>.<br/><br/><img src='https://wir.abwesend.com/wp-content/uploads/2017/09/IMG_9503_preview.jpg' width='200px' height='auto' class='marker-image'><br/>"},{title:"Mit dem Camper durch die Atacamaw\xfcste von Chile",position:new google.maps.LatLng(-33.44463,-70.6464716),content:"<b>Mit dem Camper durch die Atacamaw\xfcste von Chile</b></br></br>Erfahre mehr \xfcber unsere Zeit<br/> in Chile in <a href='https://wir.abwesend.com/2017/09/mit-dem-camper-durch-die-atacamawueste-von-chile/' class='marker-link' target='_blank'>unserem Blog</a>.<br/><br/><img src='https://wir.abwesend.com/wp-content/uploads/2017/10/P9044484-1.jpg' width='200px' height='auto' class='marker-image'><br/>"}],planned_route=[new google.maps.LatLng(52.520007,13.404954),new google.maps.LatLng(38.722252,-9.139337),new google.maps.LatLng(37.715727,-25.434506),new google.maps.LatLng(4.6884212,-74.1324184),new google.maps.LatLng(-12.1205708,-77.0305231),new google.maps.LatLng(-33.44889,-70.669266),new google.maps.LatLng(-34.603684,-58.381559),new google.maps.LatLng(-36.84846,174.763332),new google.maps.LatLng(22.396428,114.109497),new google.maps.LatLng(35.689488,139.691706),new google.maps.LatLng(10.823099,106.629664),new google.maps.LatLng(-6.17511,106.86504),new google.maps.LatLng(22.396428,114.109497),new google.maps.LatLng(12.971599,77.594563),new google.maps.LatLng(31.945367,35.928372),new google.maps.LatLng(52.520007,13.404954)],styles=[{featureType:"administrative.locality",elementType:"all",stylers:[{visibility:"on"},{saturation:-49},{lightness:60}]},{featureType:"road",elementType:"all",stylers:[{visibility:"on"},{saturation:-93},{lightness:60}]},{featureType:"water",elementType:"all",stylers:[{lightness:22}]},{featureType:"landscape.natural",elementType:"all",stylers:[{visibility:"on"},{saturation:-67},{lightness:49}]},{featureType:"poi.park",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"administrative.province",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"administrative.locality",elementType:"all",stylers:[{visibility:"on"}]},{featureType:"administrative.country",elementType:"all",stylers:[{visibility:"on"},{lightness:60}]},{featureType:"all",elementType:"all",stylers:[]}],travelled_route=[new google.maps.LatLng(52.520007,13.404954),new google.maps.LatLng(38.7755978,-9.1375554),new google.maps.LatLng(37.714653,-25.436105),new google.maps.LatLng(4.6323099,-74.0709709),new google.maps.LatLng(5.63004,-73.5276174),new google.maps.LatLng(6.5528628,-73.1380154),new google.maps.LatLng(6.6319714,-73.2284217),new google.maps.LatLng(7.0883153,-73.1316287),new google.maps.LatLng(6.2589277,-75.5661843),new google.maps.LatLng(4.636689,-75.5731589),new google.maps.LatLng(4.5277801,-75.6860379),new google.maps.LatLng(4.6884212,-74.1324184),new google.maps.LatLng(-12.1205708,-77.0305231),new google.maps.LatLng(-13.5206948,-71.9860507),new google.maps.LatLng(-13.2583316,-72.2650749),new google.maps.LatLng(-13.1546372,-72.5290346),new google.maps.LatLng(-13.2583316,-72.2650749),new google.maps.LatLng(-13.5197274,-71.9728156),new google.maps.LatLng(-15.8416623,-70.0293238),new google.maps.LatLng(-16.4042796,-71.5393331),new google.maps.LatLng(-14.0874996,-75.764203),new google.maps.LatLng(-12.1205708,-77.0305231),new google.maps.LatLng(-33.4082432,-70.7931465),new google.maps.LatLng(-18.4533494,-70.3572419),new google.maps.LatLng(-18.2498894,-69.2178395),new google.maps.LatLng(-19.594995,-70.2129502),new google.maps.LatLng(-22.3483511,-69.5683855),new google.maps.LatLng(-22.8982583,-68.1942362),new google.maps.LatLng(-23.340757,-69.856263),new google.maps.LatLng(-24.86263,-70.38344),new google.maps.LatLng(-26.39774,-70.69719),new google.maps.LatLng(-28.464412,-71.221189),new google.maps.LatLng(-29.9351589,-71.2966333),new google.maps.LatLng(-30.0304499,-70.7234345),new google.maps.LatLng(-29.9351589,-71.2966333),new google.maps.LatLng(-33.050631,-71.646068),new google.maps.LatLng(-33.398675,-71.12338),new google.maps.LatLng(-33.44463,-70.6464716),new google.maps.LatLng(-34.5953638,-58.4139765),new google.maps.LatLng(-50.3283016,-72.3328393),new google.maps.LatLng(-49.3278173,-72.9072553),new google.maps.LatLng(-41.133814,-71.29707),new google.maps.LatLng(-36.8651467,174.7562617),new google.maps.LatLng(-37.959123,175.290566),new google.maps.LatLng(-39.270388,174.095921),new google.maps.LatLng(-39.832869,174.634636),new google.maps.LatLng(-41.096783,174.865307),new google.maps.LatLng(-41.172067,174.085932),new google.maps.LatLng(-41.246854,173.884551),new google.maps.LatLng(-41.85911,172.25311),new google.maps.LatLng(-42.436623,171.199552),new google.maps.LatLng(-43.9774805,171.2895579),new google.maps.LatLng(-44.1819555,170.1602187),new google.maps.LatLng(-44.412002,171.264678),new google.maps.LatLng(-43.7859361,172.827392),new google.maps.LatLng(-42.518554,172.841693),new google.maps.LatLng(-41.42948,172.991515),new google.maps.LatLng(-41.2720598,174.0318956),new google.maps.LatLng(-41.3120989,174.7965558),new google.maps.LatLng(-40.221735,175.598176),new google.maps.LatLng(-39.174376,175.791467),new google.maps.LatLng(-38.688722,176.067124),new google.maps.LatLng(-37.760408,176.484129),new google.maps.LatLng(-37.95719,175.656385),new google.maps.LatLng(-37.006303,174.784617),new google.maps.LatLng(22.315227,114.170603),new google.maps.LatLng(35.695572,139.7967),new google.maps.LatLng(41.7622056,140.719809)];!function(){document.addEventListener("DOMContentLoaded",function(){Feed.init(),Map.init()}),window.onScrollFeed=Feed.onScroll,window.addEventListener("scroll",Feed.onScroll),window.addEventListener("resize",Map.resize),window.centerAndZoomMapTo=Map.centerAndZoomMapTo}();